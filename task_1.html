<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Задача №1</title>
  </head>
  <body>
    <p>
      Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими
      властивостями<br />
      ----- Властивості ------<br />
      назва компанії на час розробки (назву періодично змінюють)<br />
      власник компанії<br />
      споснсори (масив спонсорів)<br />
      * прізвище спонсора<br />
      * ім’я спонсора<br />
      * сума вкладень спонсора<br />
      рік випуску<br />
      вартість сайту
    </p>
    <p>Знайти:</p>
    <ol>
      <li>загальну вартість усіх сайтів</li>
      <li>кількість сайтів, що було зроблено між 2000 та 2009 рр.</li>
      <li>
        кількість сайтів, де сума спонсорських вкладень була більшою за 100000
      </li>
      <li>
        створити загальний список усіх спонсорів (поки можуть повторюватись,
        просто зібрати усі у масив)
      </li>
      <li>знайти рік, коли прибуток був найбільшим</li>
      <li>упорядкувати список за спаданням прибутку</li>
      <li>
        Створити 2 окремих списки з копіями об’єктів, що містять сайти з
        вартість до 10000 і більше 10000
      </li>
    </ol>
    <script>
      // 			Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
      // ----- Властивості ------

      let sites = [
        {
          // назва компанії на час розробки (назву періодично змінюють)
          title: "First Company",
          // власник компанії
          owner: "Олексій Іваненко",
          // споснсори (масив спонсорів)
          sponsors: [
            {
              //* прізвище спонсора
              lastName: "Ковальчук",
              // * ім’я  спонсора
              firstName: "Юлія",
              // * сума вкладень спонсора
              investmentAmount: 83000,
            },
            {
              //* прізвище спонсора
              lastName: "Петренко",
              // * ім’я  спонсора
              firstName: "Василь",
              // * сума вкладень спонсора
              investmentAmount: 31000,
            },
          ],
          // рік випуску
          year: 2022,
          // вартість сайту
          price: 70000,
        },
        {
          // назва компанії на час розробки (назву періодично змінюють)
          title: "Second Company",
          // власник компанії
          owner: "Марія Григоренко",
          // споснсори (масив спонсорів)
          sponsors: [
            {
              //* прізвище спонсора
              lastName: "Ковальов",
              // * ім’я  спонсора
              firstName: "Андрій",
              // * сума вкладень спонсора
              investmentAmount: 41000,
            },
            {
              //* прізвище спонсора
              lastName: "Шевченко",
              // * ім’я  спонсора
              firstName: "Наталія",
              // * сума вкладень спонсора
              investmentAmount: 55000,
            },
          ],
          // рік випуску
          year: 2007,
          // вартість сайту
          price: 9000,
        },
        {
          // назва компанії на час розробки (назву періодично змінюють)
          title: "Third Company",
          // власник компанії
          owner: "Павло Коваленко",
          // споснсори (масив спонсорів)
          sponsors: [
            {
              //* прізвище спонсора
              lastName: "Мельник",
              // * ім’я  спонсора
              firstName: "Оксана",
              // * сума вкладень спонсора
              investmentAmount: 29500,
            },
            {
              //* прізвище спонсора
              lastName: "Лисенко",
              // * ім’я  спонсора
              firstName: "Віталій",
              // * сума вкладень спонсора
              investmentAmount: 73200,
            },
          ],
          // рік випуску
          year: 1999,
          // вартість сайту
          price: 102000,
        },
      ];
      // Знайти:
      // 1) загальну вартість усіх сайтів
      let totalPriceAllSites = sites.reduce(
        (prevSum, site) => prevSum + site.price,
        0
      );
      document.write(
        `<h3>1) загальну вартість усіх сайтів => ${totalPriceAllSites}</h3>`
      );
      // 2) кількість сайтів, що було зроблено між 2000 та 2009 рр.
      let quantitySitesInRangeYear = sites.reduce(
        (prevCount, site) =>
          site.year >= 2000 && site.year <= 2009 ? prevCount + 1 : prevCount,
        0
      );
      document.write(
        `<h3>2) кількість сайтів, що було зроблено між 2000 та 2009 рр. => ${quantitySitesInRangeYear}</h3>`
      );
      // 3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000
      let quantitySitesSumInvestMore100000 = sites.reduce(
        (prevCount, site) =>
          site.sponsors[0].investmentAmount +
            site.sponsors[1].investmentAmount >
          100000
            ? prevCount + 1
            : prevCount,
        0
      );
      document.write(
        `<h3>3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000 => ${quantitySitesSumInvestMore100000}</h3>`
      );
      // 4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)
      let sponsorsArr = [];
      for (const site of sites) {
        for (const sponsor of site.sponsors) {
          sponsorsArr.push(`${sponsor.lastName} ${sponsor.firstName}`);
        }
      }
      document.write(
        `<h3>4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив) <br> ${sponsorsArr}</h3>`
      );
      // 5) знайти рік, коли прибуток був найбільшим
      let maxYear;
      let maxProfit = -Infinity;
      sites.forEach((site) => {
        if (site.price > maxProfit) {
          maxProfit = site.price;
          maxYear = site.year;
        }
      });
      document.write(
        `<h3>5) знайти рік, коли прибуток був найбільшим => ${maxYear}</h3>`
      );
      // 6) упорядкувати список за спаданням прибутку
      for (let i = 0; i < sites.length; i++) {
        let max = i;
        for (let j = i + 1; j < sites.length; j++) {
          if (sites[j].price > sites[max].price) max = j;
        }
        if (max !== i) {
          let temp = sites[max];
          sites[max] = sites[i];
          sites[i] = temp;
        }
      }
      console.log("6) упорядкувати список за спаданням прибутку");
      console.log(sites);
      // 7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000
      let copySitesPriceSmaller10000 = JSON.parse(JSON.stringify(sites)).filter(
        (site) => site.price < 10000
      );

      console.log("7.1) сайти з вартість до 10000");
      console.log(copySitesPriceSmaller10000);

      let copySitesPriceMore10000 = JSON.parse(JSON.stringify(sites)).filter(
        (site) => site.price > 10000
      );
			console.log("7.2) сайти з вартість більше 10000");
      console.log(copySitesPriceMore10000);
    </script>
  </body>
</html>
